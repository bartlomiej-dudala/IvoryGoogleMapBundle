<?xml version="1.0" encoding="UTF-8" ?>

<container xmlns="http://symfony.com/schema/dic/services"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://symfony.com/schema/dic/services http://symfony.com/schema/dic/services/services-1.0.xsd"
>
    <parameters>

        <!-- Business -->
        <parameter key="ivory_google_map.map.class">Ivory\GoogleMap\Map</parameter>

        <parameter key="ivory_google_map.geocoder.class">Ivory\GoogleMap\Services\Geocoding\Geocoder</parameter>
        <parameter key="ivory_google_map.geocoder.provider.class">Ivory\GoogleMap\Services\Geocoding\GeocoderProvider</parameter>
        <parameter key="ivory_google_map.geocoder.adapter.class">Geocoder\HttpAdapter\BuzzHttpAdapter</parameter>
        <parameter key="ivory_google_map.geocoder_request.class">Ivory\GoogleMap\Services\Geocoding\GeocoderRequest</parameter>

        <parameter key="ivory_google_map.directions.class">Ivory\GoogleMap\Services\Directions\Directions</parameter>
        <parameter key="ivory_google_map.directions_request.class">Ivory\GoogleMap\Services\Directions\DirectionsRequest</parameter>

        <!-- Event listener -->
        <parameter key="ivory_google_map.geocoder.event_listener.fake_request.class">Ivory\GoogleMapBundle\EventListener\FakeRequestListener</parameter>

        <!-- Helper -->
        <parameter key="ivory_google_map.map.helper">Ivory\GoogleMap\Templating\Helper\MapHelper</parameter>
        <parameter key="ivory_google_map.map_type_id.helper">Ivory\GoogleMap\Templating\Helper\MapTypeIdHelper</parameter>
    </parameters>

    <services>

        <!-- Map services -->
        <service id="ivory_google_map.map" class="%ivory_google_map.map.class%" scope="prototype">
            <call method="setPrefixJavascriptVariable">
                <argument>%ivory_google_map.map.prefix_javascript_variable%</argument>
            </call>

            <call method="setHtmlContainerId">
                <argument>%ivory_google_map.map.html_container%</argument>
            </call>

            <call method="setAsync">
                <argument>%ivory_google_map.map.async%</argument>
            </call>

            <call method="setAutoZoom">
                <argument>%ivory_google_map.map.auto_zoom%</argument>
            </call>

            <call method="setCenter">
                <argument>%ivory_google_map.map.center.latitude%</argument>
                <argument>%ivory_google_map.map.center.longitude%</argument>
                <argument>%ivory_google_map.map.center.no_wrap%</argument>
            </call>

            <call method="setBound">
                <argument>%ivory_google_map.map.bound.south_west.latitude%</argument>
                <argument>%ivory_google_map.map.bound.south_west.longitude%</argument>
                <argument>%ivory_google_map.map.bound.north_east.latitude%</argument>
                <argument>%ivory_google_map.map.bound.north_east.longitude%</argument>
                <argument>%ivory_google_map.map.bound.south_west.no_wrap%</argument>
                <argument>%ivory_google_map.map.bound.north_east.no_wrap%</argument>
            </call>

            <call method="setMapOption">
                <argument>mapTypeId</argument>
                <argument>%ivory_google_map.map.type%</argument>
            </call>

            <call method="setMapOption">
                <argument>zoom</argument>
                <argument>%ivory_google_map.map.zoom%</argument>
            </call>

            <call method="setStylesheetOption">
                <argument>width</argument>
                <argument>%ivory_google_map.map.width%</argument>
            </call>

            <call method="setStylesheetOption">
                <argument>height</argument>
                <argument>%ivory_google_map.map.height%</argument>
            </call>

            <call method="setMapOptions">
                <argument>%ivory_google_map.map.map_options%</argument>
            </call>

            <call method="setStylesheetOptions">
                <argument>%ivory_google_map.map.stylesheet_options%</argument>
            </call>

            <call method="setLanguage">
                <argument>%ivory_google_map.map.language%</argument>
            </call>

            <call method="setEventManager">
                <argument type="service" id="ivory_google_map.event_manager" />
            </call>
        </service>

        <service id="ivory_google_map.helper.map" class="%ivory_google_map.map.helper%">
            <tag name="templating.helper" alias="ivory_google_map" />
            <argument type="service" id="ivory_google_map.helper.coordinate" />
            <argument type="service" id="ivory_google_map.helper.bound" />
            <argument type="service" id="ivory_google_map.helper.map_type_id" />
            <argument type="service" id="ivory_google_map.helper.map_type_control" />
            <argument type="service" id="ivory_google_map.helper.overview_map_control" />
            <argument type="service" id="ivory_google_map.helper.pan_control" />
            <argument type="service" id="ivory_google_map.helper.rotate_control" />
            <argument type="service" id="ivory_google_map.helper.scale_control" />
            <argument type="service" id="ivory_google_map.helper.street_view_control" />
            <argument type="service" id="ivory_google_map.helper.zoom_control" />
            <argument type="service" id="ivory_google_map.helper.marker" />
            <argument type="service" id="ivory_google_map.helper.info_window" />
            <argument type="service" id="ivory_google_map.helper.polyline" />
            <argument type="service" id="ivory_google_map.helper.encoded_polyline" />
            <argument type="service" id="ivory_google_map.helper.polygon" />
            <argument type="service" id="ivory_google_map.helper.rectangle" />
            <argument type="service" id="ivory_google_map.helper.circle" />
            <argument type="service" id="ivory_google_map.helper.ground_overlay" />
            <argument type="service" id="ivory_google_map.helper.kml_layer" />
            <argument type="service" id="ivory_google_map.helper.event_manager" />
        </service>

        <!-- Map type ID service -->
        <service
            id="ivory_google_map.helper.map_type_id"
            class="%ivory_google_map.map_type_id.helper%"
            public="false"
        />

        <!-- Geocoder service -->
        <service id="ivory_google_map.geocoder" class="%ivory_google_map.geocoder.class%" scope="prototype">
            <argument type="service" id="ivory_google_map.geocoder.provider" />
        </service>

        <!-- Geocoder provider service -->
        <service
            id="ivory_google_map.geocoder.provider"
            class="%ivory_google_map.geocoder.provider.class%"
            public="false"
        >
            <argument type="service" id="ivory_google_map.geocoder.adapter" />
            <argument></argument>
            <argument></argument>
        </service>

        <!-- Geocoder adapter service -->
        <service
            id="ivory_google_map.geocoder.adapter"
            class="%ivory_google_map.geocoder.adapter.class%"
            public="false"
        />

        <!-- Geocoder request service -->
        <service
            id="ivory_google_map.geocoder_request"
            class="%ivory_google_map.geocoder_request.class%"
            scope="prototype"
        >
            <call method="setAddress">
                <argument>%ivory_google_map.geocoder_request.address%</argument>
            </call>

            <call method="setCoordinate">
                <argument>%ivory_google_map.geocoder_request.coordinate.latitude%</argument>
                <argument>%ivory_google_map.geocoder_request.coordinate.longitude%</argument>
                <argument>%ivory_google_map.geocoder_request.coordinate.no_wrap%</argument>
            </call>

            <call method="setBound">
                <argument>%ivory_google_map.geocoder_request.bound.south_west.latitude%</argument>
                <argument>%ivory_google_map.geocoder_request.bound.south_west.longitude%</argument>
                <argument>%ivory_google_map.geocoder_request.bound.north_east.latitude%</argument>
                <argument>%ivory_google_map.geocoder_request.bound.north_east.longitude%</argument>
                <argument>%ivory_google_map.geocoder_request.bound.south_west.no_wrap%</argument>
                <argument>%ivory_google_map.geocoder_request.bound.north_east.no_wrap%</argument>
            </call>

            <call method="setRegion">
                <argument>%ivory_google_map.geocoder_request.region%</argument>
            </call>

            <call method="setSensor">
                <argument>%ivory_google_map.geocoder_request.sensor%</argument>
            </call>
        </service>

        <!-- Directions service -->
        <service id="ivory_google_map.directions" class="%ivory_google_map.directions.class%" scope="prototype">
            <call method="setUrl">
                <argument>%ivory_google_map.directions.url%</argument>
            </call>

            <call method="setHttps">
                <argument>%ivory_google_map.directions.https%</argument>
            </call>

            <call method="setFormat">
                <argument>%ivory_google_map.directions.format%</argument>
            </call>
        </service>

        <!-- Directions request service -->
        <service
            id="ivory_google_map.directions_request"
            class="%ivory_google_map.directions_request.class%"
            scope="prototype"
        >
            <call method="setAvoidHighways">
                <argument>%ivory_google_map.directions_request.avoid_highways%</argument>
            </call>

            <call method="setAvoidTolls">
                <argument>%ivory_google_map.directions_request.avoid_tolls%</argument>
            </call>

            <call method="setOptimizeWaypoints">
                <argument>%ivory_google_map.directions_request.optimize_waypoints%</argument>
            </call>

            <call method="setProvideRouteAlternatives">
                <argument>%ivory_google_map.directions_request.provide_route_alternatives%</argument>
            </call>

            <call method="setRegion">
                <argument>%ivory_google_map.directions_request.region%</argument>
            </call>

            <call method="setLanguage">
                <argument>%ivory_google_map.directions_request.language%</argument>
            </call>

            <call method="setTravelMode">
                <argument>%ivory_google_map.directions_request.travel_mode%</argument>
            </call>

            <call method="setUnitSystem">
                <argument>%ivory_google_map.directions_request.unit_system%</argument>
            </call>

            <call method="setSensor">
                <argument>%ivory_google_map.directions_request.sensor%</argument>
            </call>
        </service>
    </services>
</container>
